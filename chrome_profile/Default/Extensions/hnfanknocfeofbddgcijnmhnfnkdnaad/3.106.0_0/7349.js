"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[7349],{33715:(e,n,t)=>{t.d(n,{Gj:()=>E});var a=t(14041),s=t(28345),c=t(34767),r=t(55452);function i(e){(0,r.$s)("onboarding.cbpay.stream",{action:c.X2.unknown,componentType:c.I5.modal,...e})}t(84213);var d=t(49691),o=t(58524),u=t(79071),p=t.n(u),l=t(87432);const m={open:p(),destroy:p()},h="https://pay.coinbase.com",y="https://pay-dev.cbhq.net",I=[h,y];function E({widgetParameters:e,appId:n=o.Wx??"wallet",onEvent:t,onEventError:c,onSuccess:r,onExit:u,onReady:p,closeOnExit:E,closeOnSuccess:N,experienceLoggedOut:w="popup",experienceLoggedIn:f="popup",embeddedContentStyles:v,enableOnrampSDK:C,isProduction:O=!0}){const[b,A]=(0,a.useState)(!C),T=(0,a.useRef)(m),k=(0,d.l)("kill_cbpay_buy_default_experiment")?e.defaultExperience:"buy",L=O?h:y,S=(0,a.useCallback)((function(e){if(!I.includes(e.origin))return;let n;try{n=JSON.parse(e.data).data}catch(e){c?.(e)}if(n.eventName&&"success"===n.eventName&&r?.(),n.eventName&&"analytics"!==n.eventName&&i({CBPayEventName:n.eventName}),n.eventName&&"analytics"===n.eventName){const{event:e}=n;i({CBPayEventName:e.name,...e.metadata})}}),[c,r]);return(0,l.y)((function(){if(!C)return window.addEventListener("message",S),()=>{window.removeEventListener("message",S)}})),(0,a.useEffect)((function(){return C?((0,s.mp)({appId:n,widgetParameters:{...e,defaultExperience:k},closeOnExit:E,closeOnSuccess:N,experienceLoggedOut:w,experienceLoggedIn:f,embeddedContentStyles:v,onEvent:function(e){i({CBPayEventName:e.eventName}),t?.(e)},onExit:u,onSuccess:r},((e,n)=>{n&&(A(!0),T.current=n,p?.())})),()=>{T.current?.destroy()}):(T.current={open:()=>window.open((0,s.aw)({...e,appId:n,defaultExperience:k,host:L}),"_blank"),destroy:()=>{T.current=m}},p?.())}),[n,E,N,k,v,C,f,w,L,t,u,p,r,e]),{cbPayInstance:T,isCBPayInstanceReady:b}}},31683:(e,n,t)=>{t.d(n,{aR:()=>l});var a=t(51676),s=t(10611);const c=Object.freeze([{currencyCode:"ETH",name:"ethereum",chainId:a.ay.whitelisted.ETHEREUM_MAINNET.chainId},{currencyCode:"AVAX",name:"avalanche-c-chain",chainId:a.ay.whitelisted.AVALANCHE_MAINNET.chainId},{currencyCode:"POL",name:"polygon",chainId:a.ay.whitelisted.POLYGON_MAINNET.chainId},{currencyCode:"OP",name:"optimism",chainId:a.ay.whitelisted.OPTIMISM_MAINNET.chainId},{currencyCode:"ARB",name:"arbitrum",chainId:a.ay.whitelisted.ARBITRUM_MAINNET.chainId},{currencyCode:"BASE",name:"base",chainId:a.ay.whitelisted.BASE_MAINNET.chainId},{currencyCode:"SOL",name:"solana",chainId:s.D.whitelisted.SOLANA_MAINNET.chainId},{currencyCode:"BTC",name:"bitcoin",chainId:null},{currencyCode:"DOGE",name:"dogecoin",chainId:null},{currencyCode:"LTC",name:"litecoin",chainId:null}]),r=Object.fromEntries(c.map((e=>[e.currencyCode,e]))),i=Object.fromEntries(c.filter((e=>!!e.chainId)).map((e=>[e.chainId,e]))),d=c.filter((e=>!["BTC","DOGE","LTC","SOL"].includes(e.currencyCode))).map((e=>e.currencyCode)),o=["BTC","DOGE","LTC"];var u=t(52197);const p=Object.values(a.ay.whitelisted).filter((e=>!e.isTestnet&&!!i[e.chainId]));function l({asset:e,chainId:n,networks:t,walletGroupId:a}){const s=function({primaryReceiveAddresses:e,asset:n,chainId:t,networks:a}){const s=m({asset:n,chainId:t});return Array.from(e).reduce((function(e,[c,{address:u}]){const l={address:u};if(o.includes(c)&&(l.supportedNetworks=[r[c].name],n!==c&&(n||t||a&&!a.includes(c))||(l.assets=n?[n]:void 0,e.push(l))),"SOL"===c){(!n||s&&"SOL"!==s)&&!!(n||s&&s!==c)||a&&!a.includes(c)||(l.assets=n?[n]:void 0,l.supportedNetworks=[r.SOL.name],e.push(l))}if("ETH"===c){const t=a?.filter((e=>d.includes(e))).map((e=>r[e].name));n?s||a?s&&d.includes(s)?(l.assets=[n],l.supportedNetworks=[r[s].name],e.push(l)):!s&&t&&t.length>0&&!o.includes(n)&&"SOL"!==n&&(l.assets=[n],l.supportedNetworks=t,e.push(l)):(l.assets=[n],l.supportedNetworks=p.map((e=>i[e.chainId].name)),e.push(l)):n||(s&&d.includes(s)?(l.supportedNetworks=[r[s].name],e.push(l)):!s&&t&&t.length>0?(l.supportedNetworks=t,e.push(l)):s||a||(l.supportedNetworks=p.map((e=>i[e.chainId].name)),e.push(l)))}return e}),[])}({primaryReceiveAddresses:(0,u.j)(a),asset:e,chainId:n,networks:t});return s}function m({asset:e,chainId:n}){return n&&i[n]?i[n].currencyCode:e&&o.includes(e)?e:void 0}}}]);
//# sourceMappingURL=7349.js.map